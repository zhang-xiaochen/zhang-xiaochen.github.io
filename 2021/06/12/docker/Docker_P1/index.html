

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>Docker_P1 - 方寸山</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/tomorrow.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_6peoq002giu.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.0.2"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>方寸山</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2021-06-12 17:30" pubdate>
      2021年6月12日 下午
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      44
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">Docker_P1</h1>
            
            <div class="markdown-body" id="post-body">
              <h1 id="Docker-P1"><a href="#Docker-P1" class="headerlink" title="Docker_P1"></a>Docker_P1</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://chinese.freecodecamp.org/news/the-docker-handbook/">Docker 入门教程 - 2021 最新版 (freecodecamp.org)</a></p>
</blockquote>
<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><p><em>容器是应用程序层的抽象，可以将代码和依赖项打包在一起。容器不虚拟化整个物理机，仅虚拟化主机操作系统。</em></p>
<p>虚拟机通常由称为虚拟机监控器的程序创建和管理，例如 <a target="_blank" rel="noopener" href="https://www.virtualbox.org/">Oracle VM VirtualBox</a>，<a target="_blank" rel="noopener" href="https://www.vmware.com/">VMware Workstation</a>，<a target="_blank" rel="noopener" href="https://www.linux-kvm.org/">KVM</a>，<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/about/">Microsoft Hyper-V</a> 等等。 该虚拟机监控程序通常位于主机操作系统和虚拟机之间，充当通信介质。</p>
<p>虚拟机：</p>
<p><img src="/img/docker/image-20210615211437030.png" srcset="/img/loading.gif" alt="image-20210615211437030"></p>
<p>在虚拟机内部运行的应用程序与 guest 操作系统进行通信，该 guest 操作系统在与虚拟机监控器进行通信，后者随后又与主机操作系统进行通信，以将必要的资源从物理基础设施分配给正在运行的应用程序。</p>
<p>容器：</p>
<p><img src="/img/docker/image-20210615211634919.png" srcset="/img/loading.gif" alt="image-20210615211634919"></p>
<p>在容器内部没有完整的 guest 操作系统，它只是通过容器运行时使用主机操作系统，同时保持隔离 – 就像传统的虚拟机一样。</p>
<p>容器运行时（即 Docker）位于容器和主机操作系统之间，而不是虚拟机监控器中。容器与容器运行时进行通信，容器运行时再与主机操作系统进行通信，以从物理基础设施中获取必要的资源。</p>
<h2 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h2><p>镜像是分层只读文件，其中保留着应用程序所需的状态。</p>
<p>容器只是处于运行状态的镜像。</p>
<blockquote>
<p>查看本地机器上的镜像 <code>docker images</code> 或 <code>docker image ls</code></p>
</blockquote>
<h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>镜像仓库是一个集中式的位置，可以在其中上传镜像，也可以下载其他人创建的镜像。 <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> 是 Docker 的默认公共仓库。另一个非常流行的镜像仓库是 Red Hat 的 <a target="_blank" rel="noopener" href="https://quay.io/">Quay</a>。</p>
<h2 id="Docker架构描述"><a href="#Docker架构描述" class="headerlink" title="Docker架构描述"></a>Docker架构描述</h2><p>既然已经熟悉了有关容器化和 Docker 的大多数基本概念，那么现在是时候了解 Docker 作为软件的架构了。</p>
<p>该引擎包括三个主要组件：</p>
<ol>
<li><strong>Docker 守护程序：</strong> 守护程序（<code>dockerd</code>）是一个始终在后台运行并等待来自客户端的命令的进程。守护程序能够管理各种 Docker 对象。</li>
<li><strong>Docker 客户端：</strong> 客户端（<code>docker</code>）是一个命令行界面程序，主要负责传输用户发出的命令。</li>
<li><strong>REST API：</strong> REST API 充当守护程序和客户端之间的桥梁。使用客户端发出的任何命令都将通过 API 传递，最终到达守护程序。</li>
</ol>
<p>根据官方<a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/overview/#docker-architecture">文档</a>,</p>
<blockquote>
<p>“ Docker 使用客户端-服务器体系结构。Docker <em>client</em> 与 Docker <em>daemon</em> 对话，daemon 繁重地构建、运行和分发 Docker 容器”。</p>
</blockquote>
<p>作为用户，通常将使用客户端组件执行命令。然后，客户端使用 REST API 来访问长期运行的守护程序并完成工作。 </p>
<p><img src="/img/docker/image-20210615212459349.png" srcset="/img/loading.gif" alt="image-20210615212459349"></p>
<ol>
<li>执行 <code>docker run hello-world</code> 命令，其中 <code>hello-world</code> 是镜像的名称。</li>
<li>Docker 客户端访问守护程序，告诉它获取 <code>hello-world</code> 镜像并从中运行一个容器。</li>
<li>Docker 守护程序在本地仓库中查找镜像，并发现它不存在，所以在终端上打印 <code>Unable to find image &#39;hello-world:latest&#39; locally</code>。</li>
<li>然后，守护程序访问默认的公共仓库 Docker Hub，拉取 <code>hello-world</code> 镜像的最新副本，并在命令行中展示 <code>Unable to find image &#39;hello-world:latest&#39; locally</code>。</li>
<li>Docker 守护程序根据新拉取的镜像创建一个新容器。</li>
<li>最后，Docker 守护程序运行使用 <code>hello-world</code> 镜像创建的容器，该镜像在终端上输出文本。</li>
</ol>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><pre><code class="hljs shell">docker &lt;object&gt; &lt;command&gt; &lt;options&gt;</code></pre>

<ul>
<li><code>object</code> 表示将要操作的 Docker 对象的类型。这可以是 <code>container</code>、<code>image</code>、<code>network</code> 或者 <code>volume</code> 对象。</li>
<li><code>command</code> 表示守护程序要执行的任务，即 <code>run</code> 命令。</li>
<li><code>options</code> 可以是任何可以覆盖命令默认行为的有效参数，例如端口映射的 <code>--publish</code> 选项。</li>
</ul>
<pre><code class="hljs shell">docker container run &lt;image name&gt;</code></pre>

<p>image name 可以是在线仓库或者本地系统的任何镜像。</p>
<h3 id="映射端口"><a href="#映射端口" class="headerlink" title="映射端口"></a>映射端口</h3><p>要允许从容器外部进行访问，必须将容器内的相应端口发布到本地网络上的端口。</p>
<pre><code class="hljs shell">--publish &lt;host port&gt;:&lt;container port&gt;</code></pre>



<pre><code class="hljs shell">➜  chen5  sudo docker container run --publish 8080:80 fhsinchy/hello-dock
[sudo] password for chen:
Unable to find image &#x27;fhsinchy/hello-dock:latest&#x27; locally
latest: Pulling from fhsinchy/hello-dock
0a6724ff3fcd: Pull complete
1d7c87af3754: Pull complete
9668ffa91d19: Pull complete
e81a2f5037c1: Pull complete
991b5ddb4d9e: Pull complete
9f4fab0aaa1b: Pull complete
Digest: sha256:852a90695e942a8aefe5883cb9681a3fbedfdf89f64468e22fa30e04766e5f2e
Status: Downloaded newer image for fhsinchy/hello-dock:latest
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up</code></pre>

<p><img src="/img/docker/image-20210615213732401.png" srcset="/img/loading.gif" alt="image-20210615213732401"></p>
<h3 id="容器后台运行"><a href="#容器后台运行" class="headerlink" title="容器后台运行"></a>容器后台运行</h3><pre><code class="hljs shell">---detach 或 -d 参数</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container run --publish 8080:80 --detach fhsinchy/hello-dock
9918abf45820ca77a80eaa178d7ad66ee114547f3a5124a919e4b5e52b66f486</code></pre>

<blockquote>
<p>–publish 和 –detach顺序没有要求</p>
</blockquote>
<h3 id="查看正在运行的容器"><a href="#查看正在运行的容器" class="headerlink" title="查看正在运行的容器"></a>查看正在运行的容器</h3><pre><code class="hljs shell">container ls</code></pre>



<pre><code class="hljs shell">➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS
                       NAMES
9918abf45820   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   2 minutes ago   Up 2 minutes   0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   bold_dewdney</code></pre>

<h3 id="查看过去运行的容器"><a href="#查看过去运行的容器" class="headerlink" title="查看过去运行的容器"></a>查看过去运行的容器</h3><pre><code class="hljs shell">--all 或 -a</code></pre>



<pre><code class="hljs shell">➜  chen5  sudo docker container ls --all
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS                     PORTS                                   NAMES
9918abf45820   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   9 minutes ago    Up 9 minutes               0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   bold_dewdney
b5bcc6b696c9   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   17 minutes ago   Exited (0) 9 minutes ago
                                    tender_lamarr
2c2ac99bf078   hello-world           &quot;/hello&quot;                 2 days ago       Exited (0) 2 days ago</code></pre>

<h3 id="指定容器名"><a href="#指定容器名" class="headerlink" title="指定容器名"></a>指定容器名</h3><p>默认情况下每个容器都有两个标识符 </p>
<ul>
<li>CONTAINER ID  -&gt; 64个字符的随机字符串</li>
<li>NAME -&gt; 两个单词的随机组合，下滑线连接</li>
</ul>
<pre><code class="hljs shell">--name</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container run --publish 8888:80 --detach --name hello-docker-container fhsinchy/hello-dock
2925cec4da90141fa5f12f7fc38e22f3d01e7d5d3d9118bc63b5e145914bc1ee
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS
                     NAMES
2925cec4da90   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   13 seconds ago   Up 12 seconds   0.0.0.0:8888-&gt;80/tcp, :::8888-&gt;80/tcp   hello-docker-container
9918abf45820   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   16 minutes ago   Up 16 minutes   0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   bold_dewdney</code></pre>

<h3 id="重命名旧容器"><a href="#重命名旧容器" class="headerlink" title="重命名旧容器"></a>重命名旧容器</h3><pre><code class="hljs shell">docker container rename &lt;container identifier&gt; &lt;new name&gt;</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container rename bold_dewdney hello-docker-container2
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS
                     NAMES
2925cec4da90   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   3 minutes ago    Up 3 minutes    0.0.0.0:8888-&gt;80/tcp, :::8888-&gt;80/tcp   hello-docker-container
9918abf45820   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   18 minutes ago   Up 18 minutes   0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   hello-docker-container2</code></pre>

<h3 id="停止容器"><a href="#停止容器" class="headerlink" title="停止容器"></a>停止容器</h3><pre><code class="hljs shell">docker container stop &lt;container identifier&gt;</code></pre>

<blockquote>
<p>container identifier 可以是 CONTAINER ID 或者NAME</p>
</blockquote>
<pre><code class="hljs shell">➜  chen5  sudo docker container stop hello-docker-container
hello-docker-container
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS
                     NAMES
9918abf45820   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   21 minutes ago   Up 21 minutes   0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   hello-docker-container2</code></pre>

<p><code>stop</code> 命令通过发送信号<code>SIGTERM</code> 来正常关闭容器。如果容器在一定时间内没有停止运行，则会发出 <code>SIGKILL</code> 信号，该信号会立即关闭容器。</p>
<p>如果要发送 <code>SIGKILL</code> 信号而不是 <code>SIGTERM</code> 信号，则可以改用 <code>container kill</code> 命令。<code>container kill</code> 命令遵循与 <code>stop</code> 命令相同的语法。</p>
<pre><code class="hljs shell">docker container kill &lt;container identifier&gt;</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container kill hello-docker-container2
hello-docker-container2
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre>

<h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><pre><code class="hljs shell">docker container start &lt;container identifier&gt;</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container start hello-docker-container
hello-docker-container
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS
                   NAMES
2925cec4da90   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   9 minutes ago   Up 3 seconds   0.0.0.0:8888-&gt;80/tcp, :::8888-&gt;80/tcp   hello-docker-container</code></pre>

<h3 id="重启容器"><a href="#重启容器" class="headerlink" title="重启容器"></a>重启容器</h3><pre><code class="hljs shell">docker container restart &lt;container identifier&gt;</code></pre>

<pre><code class="hljs shell">➜  chen5  sudo docker container restart hello-docker-container
hello-docker-container
➜  chen5  sudo docker container ls
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS         PORTS
                    NAMES
2925cec4da90   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   10 minutes ago   Up 2 seconds   0.0.0.0:8888-&gt;80/tcp, :::8888-&gt;80/tcp   hello-docker-container</code></pre>

<h3 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h3><pre><code class="hljs shell">docker container create &lt;options&gt;</code></pre>

<blockquote>
<p><code>docker container run</code> 命令实际是 <code>docker container create</code> 和 <code>docker container start</code>两个命令的组合</p>
</blockquote>
<pre><code class="hljs shell">➜  ~  sudo docker container create --publish 8080:80 fhsinchy/hello-dock
8b88edf8d01e531d7d96824a9add39ad79bf74c4bfde27deb58e1abc8c0de0e0
➜  ~  sudo docker container ls -all
CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS    PORTS     NAMES
8b88edf8d01e   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   4 seconds ago   Created             great_ganguly</code></pre>

<h3 id="移除挂起的容器"><a href="#移除挂起的容器" class="headerlink" title="移除挂起的容器"></a>移除挂起的容器</h3><pre><code class="hljs shell">docker container rm &lt;container identifier&gt;</code></pre>

<blockquote>
<p>已被停止或终止的容器仍保留在系统中。这些挂起的容器可能会占用空间或与较新的容器发生冲突</p>
</blockquote>
<pre><code class="hljs shell">➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS                  PORTS     NAMES
c211f963a765   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   4 seconds ago   Created                           amazing_turing
b5bcc6b696c9   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   3 days ago      Exited (0) 3 days ago             tender_lamarr
2c2ac99bf078   hello-world           &quot;/hello&quot;                 6 days ago      Exited (0) 6 days ago             brave_golick
666d2f8672e2   hello-world           &quot;/hello&quot;                 6 days ago      Exited (0) 6 days ago             condescending_hellman
➜  ~  sudo docker container rm c211f963a765
c211f963a765
➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE                 COMMAND                  CREATED      STATUS                  PORTS     NAMES
b5bcc6b696c9   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   3 days ago   Exited (0) 3 days ago             tender_lamarr
2c2ac99bf078   hello-world           &quot;/hello&quot;                 6 days ago   Exited (0) 6 days ago             brave_golick
666d2f8672e2   hello-world           &quot;/hello&quot;                 6 days ago   Exited (0) 6 days ago             condescending_hellman
➜  ~</code></pre>

<p>可以一次删除多个容器，传入的标识符用空格隔开即可。</p>
<p>一次删除多个容器，也可以使用以下命令。</p>
<pre><code class="hljs shell">docker container</code></pre>

<pre><code class="hljs shell">➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE                 COMMAND                  CREATED      STATUS                  PORTS     NAMES
b5bcc6b696c9   fhsinchy/hello-dock   &quot;/docker-entrypoint.…&quot;   3 days ago   Exited (0) 3 days ago             tender_lamarr
2c2ac99bf078   hello-world           &quot;/hello&quot;                 6 days ago   Exited (0) 6 days ago             brave_golick
666d2f8672e2   hello-world           &quot;/hello&quot;                 6 days ago   Exited (0) 6 days ago             condescending_hellman
➜  ~  sudo docker container prune
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
b5bcc6b696c9eb6802bbd32dde3dc1586f2ebeee8cede3786fa03cf493454a95
2c2ac99bf078904481b0c7529b5ed5ec98dfbe7620662b5826a90daf90c8932d
666d2f8672e233e173dae327b9e5b60859a8b10fc1503070af56aebfefecb7ea

Total reclaimed space: 1.114kB
➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre>

<blockquote>
<p>启动容器的时候有 <code>--rm</code> 参数，标识在容器停止运行的时候删除掉容器。</p>
</blockquote>
<pre><code class="hljs angelscript">➜  ~  sudo docker container run --rm --publish <span class="hljs-number">8888</span>:<span class="hljs-number">80</span> --detach --name hello-docker-container fhsinchy/hello-dock
ab233d95e5cf2c5e4d020747d7a74c591947a6a049f15e11c0e1e21ada66205c
➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS
    NAMES
ab233d95e5cf   fhsinchy/hello-dock   <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   <span class="hljs-number">34</span> seconds ago   Up <span class="hljs-number">33</span> seconds   <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp, :::<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp   hello-docker-container
➜  ~  sudo docker container stop hello-docker-container
hello-docker-container
➜  ~  sudo docker container ls --all
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre>

<h3 id="以交互式模式启动容器"><a href="#以交互式模式启动容器" class="headerlink" title="以交互式模式启动容器"></a>以交互式模式启动容器</h3><blockquote>
<p>交互式镜像如 ubuntu之类的linux镜像，运行的时候进入到ubuntu的bash，启动的时候需要加  <code>-it</code>参数。</p>
<ul>
<li>选项 <code>-i</code> 或 <code>--interactive</code> 连接到容器的输入流，以便可以将输入发送到 bash。</li>
<li><code>-t</code> 或 <code>--tty</code> 选项可通过分配伪 tty 来格式化展示并提供类似本机终端的体验。</li>
</ul>
</blockquote>
<pre><code class="hljs shell">➜ ~  sudo docker container run --rm -it ubuntu
Unable to find image &#x27;ubuntu:latest&#x27; locally
latest: Pulling from library/ubuntu
c549ccf8d472: Pull complete
Digest: sha256:aba80b77e27148d99c034a987e7da3a287ed455390352663418c0f2ed40417fe
Status: Downloaded newer image for ubuntu:latest
root@269a69740972:/# cat /etc/os-release
NAME=&quot;Ubuntu&quot;
VERSION=&quot;20.04.2 LTS (Focal Fossa)&quot;
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME=&quot;Ubuntu 20.04.2 LTS&quot;
VERSION_ID=&quot;20.04&quot;
HOME_URL=&quot;https://www.ubuntu.com/&quot;
SUPPORT_URL=&quot;https://help.ubuntu.com/&quot;
BUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;
PRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal
root@269a69740972:/#</code></pre>

<blockquote>
<p>退出交互容器命令 <code>ctrl d</code></p>
</blockquote>
<p>交互执行node，可以运行js代码</p>
<pre><code class="hljs shell">➜  ~  sudo docker run --rm -it node
Unable to find image &#x27;node:latest&#x27; locally
latest: Pulling from library/node
d960726af2be: Pull complete
e8d62473a22d: Pull complete
8962bc0fad55: Pull complete
65d943ee54c1: Pull complete
532f6f723709: Pull complete
f8463f32765b: Pull complete
5714599515d2: Pull complete
0f0993710fe6: Pull complete
d09a14b7c3cb: Pull complete
Digest: sha256:e36cf1bb8719551220ba8c3ee1583881e79ad040803570e0849b00b8fe009153
Status: Downloaded newer image for node:latest
Welcome to Node.js v16.3.0.
Type &quot;.help&quot; for more information.
<span class="hljs-meta">&gt;</span><span class="bash"> var a = 1;</span>
undefined
<span class="hljs-meta">&gt;</span><span class="bash"> var b = 2;</span>
undefined
<span class="hljs-meta">&gt;</span><span class="bash"> a + b</span>
3</code></pre>

<h3 id="在容器里执行命令"><a href="#在容器里执行命令" class="headerlink" title="在容器里执行命令"></a>在容器里执行命令</h3><blockquote>
<p>通过运行特定容器 让容器执行传入的命令。</p>
</blockquote>
<pre><code class="hljs shell">docker container run &lt;image name&gt; &lt;command&gt;</code></pre>

<pre><code class="hljs shell">➜  ~  sudo docker container run --rm busybox echo -n my-secret | base64
Unable to find image &#x27;busybox:latest&#x27; locally
latest: Pulling from library/busybox
b71f96345d44: Pulling fs layer
b71f96345d44: Download complete
b71f96345d44: Pull complete
Digest: sha256:930490f97e5b921535c153e0e7110d251134cc4b72bbb8133c6a5065cc68580d
Status: Downloaded newer image for busybox:latest
bXktc2VjcmV0</code></pre>

<blockquote>
<p>busybox -&gt; The Swiss Army Knife of Embedded Linux</p>
</blockquote>
<pre><code class="hljs shell">➜  ~  sudo docker container run ubuntu uname -a
Linux e090d6ac7e4b 5.4.72-microsoft-standard-WSL2 #1 SMP Wed Oct 28 23:40:43 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</code></pre>




            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Docker/">Docker</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/03/27/blog/volatile/">
                        <span class="hidden-mobile">volatile关键字使用指南</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Docker_P1&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
